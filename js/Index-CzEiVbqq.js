import{i as le,u as te,U as K,C as O,I as j,a as se,b as ne,c as oe,d as ie,e as re,t as ue,E as ce,f as de}from"./request-Cs-5J-qA.js";import{E as pe}from"./el-image-viewer-2BXCag7z.js";import{E as ve,a as me}from"./el-input-ZzuqlYaP.js";/* empty css                  */import{d as fe,i as U,e as ge,f as $,g as L,h as q,j as Y,u as he,k as y,r as k,w as G,l as we,m as be,o,c as V,n as S,p as t,q as h,s as ye,t as p,v as r,x as N,E,y as g,z,a as n,A as Ve,B as J,C as ke,D as Ie,F as _e,G as Ce,H as Ee,I as W,J as Se,_ as Te,K as Fe,L as Ne,M as Pe,N as Z,O as Be,P as Ae,Q as R}from"./index-BnB9npJL.js";import{u as Q}from"./user-CwqoNLhH.js";import{E as X}from"./index-Cr4carRk.js";const Ue=fe({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:le},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:U},activeActionIcon:{type:U},activeIcon:{type:U},inactiveIcon:{type:U},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ge(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...te(["ariaLabel"])}),Re={[K]:u=>$(u)||L(u)||q(u),[O]:u=>$(u)||L(u)||q(u),[j]:u=>$(u)||L(u)||q(u)},$e=["onClick"],De=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Me=["aria-hidden"],Le=["aria-hidden"],qe=["aria-hidden"],x="ElSwitch",ze=Y({name:x}),Ke=Y({...ze,props:Ue,emits:Re,setup(u,{expose:P,emit:w}){const s=u,{formItem:I}=se(),B=ne(),i=he("switch"),{inputId:d}=oe(s,{formItemContext:I}),C=ie(y(()=>s.loading)),T=k(s.modelValue!==!1),v=k(),D=k(),A=y(()=>[i.b(),i.m(B.value),i.is("disabled",C.value),i.is("checked",a.value)]),m=y(()=>[i.e("label"),i.em("label","left"),i.is("active",!a.value)]),l=y(()=>[i.e("label"),i.em("label","right"),i.is("active",a.value)]),b=y(()=>({width:Ee(s.width)}));G(()=>s.modelValue,()=>{T.value=!0});const c=y(()=>T.value?s.modelValue:!1),a=y(()=>c.value===s.activeValue);[s.activeValue,s.inactiveValue].includes(c.value)||(w(K,s.inactiveValue),w(O,s.inactiveValue),w(j,s.inactiveValue)),G(a,e=>{var f;v.value.checked=e,s.validateEvent&&((f=I==null?void 0:I.validate)==null||f.call(I,"change").catch(ae=>re()))});const _=()=>{const e=a.value?s.inactiveValue:s.activeValue;w(K,e),w(O,e),w(j,e),Ce(()=>{v.value.checked=a.value})},F=()=>{if(C.value)return;const{beforeChange:e}=s;if(!e){_();return}const f=e();[W(f),$(f)].includes(!0)||ue(x,"beforeChange must return type `Promise<boolean>` or `boolean`"),W(f)?f.then(H=>{H&&_()}).catch(H=>{}):f&&_()},M=()=>{var e,f;(f=(e=v.value)==null?void 0:e.focus)==null||f.call(e)};return we(()=>{v.value.checked=a.value}),be({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},y(()=>!!s.label)),P({focus:M,checked:a}),(e,f)=>(o(),V("div",{class:h(t(A)),onClick:Ie(F,["prevent"])},[S("input",{id:t(d),ref_key:"input",ref:v,class:h(t(i).e("input")),type:"checkbox",role:"switch","aria-checked":t(a),"aria-disabled":t(C),"aria-label":e.label||e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:t(C),tabindex:e.tabindex,onChange:_,onKeydown:ye(F,["enter"])},null,42,De),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(o(),V("span",{key:0,class:h(t(m))},[e.inactiveIcon?(o(),p(t(E),{key:0},{default:r(()=>[(o(),p(N(e.inactiveIcon)))]),_:1})):g("v-if",!0),!e.inactiveIcon&&e.inactiveText?(o(),V("span",{key:1,"aria-hidden":t(a)},z(e.inactiveText),9,Me)):g("v-if",!0)],2)):g("v-if",!0),S("span",{ref_key:"core",ref:D,class:h(t(i).e("core")),style:ke(t(b))},[e.inlinePrompt?(o(),V("div",{key:0,class:h(t(i).e("inner"))},[e.activeIcon||e.inactiveIcon?(o(),p(t(E),{key:0,class:h(t(i).is("icon"))},{default:r(()=>[(o(),p(N(t(a)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(o(),V("span",{key:1,class:h(t(i).is("text")),"aria-hidden":!t(a)},z(t(a)?e.activeText:e.inactiveText),11,Le)):g("v-if",!0)],2)):g("v-if",!0),S("div",{class:h(t(i).e("action"))},[e.loading?(o(),p(t(E),{key:0,class:h(t(i).is("loading"))},{default:r(()=>[n(t(Ve))]),_:1},8,["class"])):t(a)?J(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?(o(),p(t(E),{key:0},{default:r(()=>[(o(),p(N(e.activeActionIcon)))]),_:1})):g("v-if",!0)]):t(a)?g("v-if",!0):J(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?(o(),p(t(E),{key:0},{default:r(()=>[(o(),p(N(e.inactiveActionIcon)))]),_:1})):g("v-if",!0)])],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(o(),V("span",{key:1,class:h(t(l))},[e.activeIcon?(o(),p(t(E),{key:0},{default:r(()=>[(o(),p(N(e.activeIcon)))]),_:1})):g("v-if",!0),!e.activeIcon&&e.activeText?(o(),V("span",{key:1,"aria-hidden":!t(a)},z(e.activeText),9,qe)):g("v-if",!0)],2)):g("v-if",!0)],10,$e))}});var Oe=_e(Ke,[["__file","switch.vue"]]);const je=Se(Oe),He="/assets/weidian-bind-JA7Te5Vc.jpg",Ge="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M24%2044C29.5228%2044%2034.5228%2041.7614%2038.1421%2038.1421C41.7614%2034.5228%2044%2029.5228%2044%2024C44%2018.4772%2041.7614%2013.4772%2038.1421%209.85786C34.5228%206.23858%2029.5228%204%2024%204C18.4772%204%2013.4772%206.23858%209.85786%209.85786C6.23858%2013.4772%204%2018.4772%204%2024C4%2029.5228%206.23858%2034.5228%209.85786%2038.1421C13.4772%2041.7614%2018.4772%2044%2024%2044Z'%20fill='%23333'%20stroke='%23333'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M24%2028.6248V24.6248C27.3137%2024.6248%2030%2021.9385%2030%2018.6248C30%2015.3111%2027.3137%2012.6248%2024%2012.6248C20.6863%2012.6248%2018%2015.3111%2018%2018.6248'%20stroke='%23FFF'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24%2037.6248C25.3807%2037.6248%2026.5%2036.5055%2026.5%2035.1248C26.5%2033.7441%2025.3807%2032.6248%2024%2032.6248C22.6193%2032.6248%2021.5%2033.7441%2021.5%2035.1248C21.5%2036.5055%2022.6193%2037.6248%2024%2037.6248Z'%20fill='%23FFF'/%3e%3c/svg%3e",ee=u=>(Be("data-v-cf3f1a6c"),u=u(),Ae(),u),Je={class:"page-login"},We=ee(()=>S("header",null,null,-1)),Ze=ee(()=>S("div",{class:"bg"},null,-1)),Qe={__name:"Index",setup(u){const P=Fe(),w=Ne(),s=k(!1),I=(m,l,b)=>{var c=/^(\w+){6,16}$/i;c.test(l)?b():b("格式不正确喔，请输入6-16位字符，可使用字母数字下划线")},B=Pe({nickname:[{required:!0,message:"昵称不能为空喔",trigger:"blur"}],account:[{required:!0,message:"账号不能为空喔",trigger:"blur"},{validator:I,trigger:"blur"}],password:[{required:!0,message:"密码不能为空喔",trigger:"blur"},{validator:I,trigger:"blur"}],vd_uid:[{required:!0,message:"不能为空喔",trigger:"blur"}],phone_num:[{required:!0,message:"不能为空喔",trigger:"blur"}]}),i=k(),d=k({nickname:"",account:"",password:"",vd_uid:"",phone_num:""}),C=async m=>{m&&await m.validate(async(l,b)=>{if(l){const c=X.service({fullscreen:!0}),a=await Q.register(d.value);c.close(),a.code===200?(R.success("注册成功"),A()):R.error(a.msg)}})},T=k(),v=k({account:"",password:""}),D=async m=>{m&&await m.validate(async(l,b)=>{if(l){const c=X.service({fullscreen:!0}),a=await Q.login(v.value);c.close(),a.code===200?(R.success("登录成功"),A()):R.error(a.msg)}})},A=()=>{var l;const m=(l=w.query)==null?void 0:l.beforePath;m?P.replace(`/${m}`):P.replace("/mine")};return(m,l)=>{const b=je,c=ce,a=me,_=de,F=ve,M=pe;return o(),V("div",Je,[We,Ze,S("main",null,[n(b,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),class:"switch-cell","active-text":"注册","inactive-text":"登录"},null,8,["modelValue"]),s.value?s.value?(o(),p(F,{key:1,class:"form-wrap",ref_key:"registerFormRef",ref:i,model:d.value,rules:B,"status-icon":""},{default:r(()=>[n(a,{prop:"nickname",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:d.value.nickname,"onUpdate:modelValue":l[4]||(l[4]=e=>d.value.nickname=e),placeholder:"输入昵称（ID）"},null,8,["modelValue"])]),_:1}),n(a,{prop:"account",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:d.value.account,"onUpdate:modelValue":l[5]||(l[5]=e=>d.value.account=e),placeholder:"输入你想要的登录账号"},null,8,["modelValue"])]),_:1}),n(a,{prop:"password",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:d.value.password,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value.password=e),placeholder:"输入密码"},null,8,["modelValue"])]),_:1}),n(a,{prop:"vd_uid",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell hint",modelValue:d.value.vd_uid,"onUpdate:modelValue":l[7]||(l[7]=e=>d.value.vd_uid=e),placeholder:"输入需绑定的微店uid",oninput:"v=>(v=v.replace(/[^\\d]/g,''))"},null,8,["modelValue"]),n(M,{class:"icon-help",src:t(Ge),"preview-teleported":"","preview-src-list":[t(He)]},null,8,["src","preview-src-list"])]),_:1}),n(a,{prop:"phone_num",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:d.value.phone_num,"onUpdate:modelValue":l[8]||(l[8]=e=>d.value.phone_num=e),placeholder:"输入微店手机号后4位",oninput:"v=>(v=v.replace(/[^\\d]/g,''))",maxlength:"4"},null,8,["modelValue"])]),_:1}),n(a,null,{default:r(()=>[n(_,{class:"button-confirm",onClick:l[9]||(l[9]=e=>C(i.value))},{default:r(()=>[Z("注册")]),_:1})]),_:1})]),_:1},8,["model","rules"])):g("",!0):(o(),p(F,{key:0,class:"form-wrap",ref_key:"loginFormRef",ref:T,model:v.value,rules:B,"status-icon":""},{default:r(()=>[n(a,{prop:"account",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:v.value.account,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value.account=e),placeholder:"输入登录账号"},null,8,["modelValue"])]),_:1}),n(a,{prop:"password",class:"input-wrap"},{default:r(()=>[n(c,{class:"input-cell",modelValue:v.value.password,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value.password=e),placeholder:"输入密码"},null,8,["modelValue"])]),_:1}),n(a,null,{default:r(()=>[n(_,{class:"button-confirm",onClick:l[3]||(l[3]=e=>D(T.value))},{default:r(()=>[Z("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"]))])])}}},sa=Te(Qe,[["__scopeId","data-v-cf3f1a6c"]]);export{sa as default};

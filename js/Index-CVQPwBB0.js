import{e as V,c as $,m as Y,n as L,t as R,u as E,i as P,I as z,w as T,a as J,B as W,b as X,p as A,d as Z,r as ee,_ as te}from"./HeaderBar-Bmgv5a9k.js";import{s as ae}from"./request-Cs-5J-qA.js";import{a as le,E as ne}from"./el-col-BmfoZYKa.js";import{E as oe}from"./el-image-viewer-2BXCag7z.js";import{ap as G,r as w,w as H,j as D,a as i,k as j,aq as re,ar as se,as as ce,G as ie,_ as de,l as ue,Q as fe,c as B,v as k,o as S,ag as q,am as U,t as M,n as y,z as C,O as ve,P as me}from"./index-BnB9npJL.js";import{E as _e}from"./index-Cr4carRk.js";function F(e){const t=G();t&&V(t.proxy,e)}const ge={to:[String,Object],url:String,replace:Boolean};function pe({to:e,url:t,replace:l,$router:f}){e&&f?f[l?"replace":"push"](e):t&&(l?location.replace(t):location.href=t)}function be(){const e=G().proxy;return()=>pe(e)}function he(e){const t=w(!1);return H(e,l=>{l&&(t.value=l)},{immediate:!0}),l=>()=>t.value?l():null}const[xe,x]=$("cell"),N={tag:Y("div"),icon:String,size:String,title:L,value:L,label:L,center:Boolean,isLink:Boolean,border:R,iconPrefix:String,valueClass:E,labelClass:E,titleClass:E,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},ye=V({},N,ge);var we=D({name:xe,props:ye,setup(e,{slots:t}){const l=be(),f=()=>{if(t.label||P(e.label))return i("div",{class:[x("label"),e.labelClass]},[t.label?t.label():e.label])},g=()=>{var n;if(t.title||P(e.title)){const a=(n=t.title)==null?void 0:n.call(t);return Array.isArray(a)&&a.length===0?void 0:i("div",{class:[x("title"),e.titleClass],style:e.titleStyle},[a||i("span",null,[e.title]),f()])}},v=()=>{const n=t.value||t.default;if(n||P(e.value))return i("div",{class:[x("value"),e.valueClass]},[n?n():i("span",null,[e.value])])},c=()=>{if(t.icon)return t.icon();if(e.icon)return i(z,{name:e.icon,class:x("left-icon"),classPrefix:e.iconPrefix},null)},o=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const n=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return i(z,{name:n,class:x("right-icon")},null)}};return()=>{var n;const{tag:a,size:s,center:d,border:m,isLink:u,required:_}=e,r=(n=e.clickable)!=null?n:u,p={center:d,required:!!_,clickable:r,borderless:!m};return s&&(p[s]=!!s),i(a,{class:x(p),role:r?"button":void 0,tabindex:r?0:void 0,onClick:l},{default:()=>{var b;return[c(),g(),v(),o(),(b=t.extra)==null?void 0:b.call(t)]}})}}});const ke=T(we),[K,Se]=$("collapse"),Q=Symbol(K),Ce={border:R,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Ie=D({name:K,props:Ce,emits:["change","update:modelValue"],setup(e,{emit:t,slots:l}){const{linkChildren:f,children:g}=J(Q),v=a=>{t("change",a),t("update:modelValue",a)},c=(a,s)=>{const{accordion:d,modelValue:m}=e;v(d?a===m?"":a:s?m.concat(a):m.filter(u=>u!==a))},o=(a={})=>{if(e.accordion)return;typeof a=="boolean"&&(a={expanded:a});const{expanded:s,skipDisabled:d}=a,u=g.filter(_=>_.disabled&&d?_.expanded.value:s??!_.expanded.value).map(_=>_.itemName.value);v(u)},n=a=>{const{accordion:s,modelValue:d}=e;return s?d===a:d.includes(a)};return F({toggleAll:o}),f({toggle:c,isExpanded:n}),()=>{var a;return i("div",{class:[Se(),{[W]:e.border}]},[(a=l.default)==null?void 0:a.call(l)])}}});const Le=T(Ie),[Re,I]=$("collapse-item"),Ee=["icon","title","value","label","right-icon"],Pe=V({},N,{name:L,isLink:R,disabled:Boolean,readonly:Boolean,lazyRender:R});var Be=D({name:Re,props:Pe,setup(e,{slots:t}){const l=w(),f=w(),{parent:g,index:v}=X(Q);if(!g)return;const c=j(()=>{var r;return(r=e.name)!=null?r:v.value}),o=j(()=>g.isExpanded(c.value)),n=w(o.value),a=he(()=>n.value||!e.lazyRender),s=()=>{o.value?l.value&&(l.value.style.height=""):n.value=!1};H(o,(r,p)=>{if(p===null)return;r&&(n.value=!0),(r?ie:ee)(()=>{if(!f.value||!l.value)return;const{offsetHeight:h}=f.value;if(h){const O=`${h}px`;l.value.style.height=r?"0":O,Z(()=>{l.value&&(l.value.style.height=r?O:"0")})}else s()})});const d=(r=!o.value)=>{g.toggle(c.value,r)},m=()=>{!e.disabled&&!e.readonly&&d()},u=()=>{const{border:r,disabled:p,readonly:b}=e,h=A(e,Object.keys(N));return b&&(h.isLink=!1),(p||b)&&(h.clickable=!1),i(ke,re({role:"button",class:I("title",{disabled:p,expanded:o.value,borderless:!r}),"aria-expanded":String(o.value),onClick:m},h),A(t,Ee))},_=a(()=>{var r;return se(i("div",{ref:l,class:I("wrapper"),onTransitionend:s},[i("div",{ref:f,class:I("content")},[(r=t.default)==null?void 0:r.call(t)])]),[[ce,n.value]])});return F({toggle:d,expanded:o,itemName:c}),()=>i("div",{class:[I({border:v.value&&e.border})]},[u(),_()])}});const Ve=T(Be),$e={list(e){return ae({url:"/v1/card/list",method:"post",data:e})}},Te=e=>(ve("data-v-ac5ba1f3"),e=e(),me(),e),De={class:"page-wrapper"},Ne=Te(()=>y("div",{class:"tips"},"Tips: 每小时更新一次数据",-1)),Oe={class:"level-cell-title-wrap flex"},ze={class:"level-cell-title"},Ae={class:"level-cell-title-sub"},je={class:"level-cell-item"},qe={class:"level-cell-item-title"},Ue={__name:"Index",setup(e){ue(async()=>{const c=_e.service({fullscreen:!0});await f(),c.close()});const t=w([0,1,2,3,4]),l=w([{level:"N",total:0,get:0,cardInfo:[]},{level:"R",total:0,get:0,cardInfo:[]},{level:"SR",total:0,get:0,cardInfo:[]},{level:"SSR",total:0,get:0,cardInfo:[]},{level:"UR",total:0,get:0,cardInfo:[]}]),f=async()=>{const c=await $e.list();c.code===200?g(c.data.list):fe.warning(c.msg)},g=c=>{for(const o of l.value){let n=o.level==="UR"?6:16;for(let a=1;a<=n;a+=1){let s=`${o.level.toLowerCase()}${a}`,d=c.includes(s),m=v(d?s:"empty");o.total+=1,d&&(o.get+=1),o.cardInfo.push({card_title:s,card_image:m})}}},v=c=>{const o=`/cardImage/${c}.jpg`;return new URL(o,import.meta.url).href};return(c,o)=>{const n=oe,a=le,s=ne,d=Ve,m=Le;return S(),B("div",De,[i(te,{title:"集卡进度"}),Ne,i(m,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=u=>t.value=u),border:!1},{default:k(()=>[(S(!0),B(q,null,U(l.value,(u,_)=>(S(),M(d,{class:"level-cell",key:_,name:_,border:!1},{title:k(()=>[y("div",Oe,[y("div",ze,C(u.level),1),y("div",Ae,"("+C(u.get)+"/"+C(u.total)+")",1)])]),default:k(()=>[i(s,{gutter:16},{default:k(()=>[(S(!0),B(q,null,U(u.cardInfo,(r,p)=>(S(),M(a,{span:6,key:p},{default:k(()=>[y("div",je,[i(n,{src:r.card_image,fit:"cover"},null,8,["src"]),y("div",qe,C(r.card_title),1)])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])}}},Ye=de(Ue,[["__scopeId","data-v-ac5ba1f3"]]);export{Ye as default};
